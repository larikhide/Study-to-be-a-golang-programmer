jQuery(document).ready(function($){function get_random_ad_baner(element,index){var xhr=new XMLHttpRequest();var index_=0;if(index>=0&&index<=7){index_=index;}
var indexes=localStorage.getItem('ms-learn-indexes2');if(!indexes||indexes==null){indexes=[];}else{indexes=indexes.split(',');}
xhr.open('GET',blu.ajaxurl+'?action=get_random_mobile_a_block&index='+index_);xhr.send();xhr.onreadystatechange=function(){var DONE=4;var OK=200;if(xhr.readyState===DONE){if(xhr.status===OK){element.innerHTML=xhr.responseText;element.style.display='block';if(typeof ga!='undefined'&&ga)
ga('send','event','ms','show',$('#mobile_baner_id').val());localStorage.setItem('ms-learn-queue-index',parseInt(index_)+1);$('#mobile_baner_close_btn').on('click',function(){if(typeof ga!='undefined'&&ga)
ga('send','event','ms','close',$('#mobile_baner_id').val());localStorage.setItem('ms-learn-'+$('#mobile_baner_id').val(),'closed');indexes.push(index);localStorage.setItem('ms-learn-indexes2',indexes.join(','));element.remove();});$('#mobile_baner_send_btn').on('click',function(){if(typeof ga!='undefined'&&ga)
ga('send','event','ms','click',$('#mobile_baner_id').val());localStorage.setItem('ms-learn-'+$('#mobile_baner_id').val(),'closed');indexes.push(index);localStorage.setItem('ms-learn-indexes2',indexes.join(','));element.remove();});if(xhr.responseText===0||xhr.responseText==='0'){element.remove();}}else{console.log('Error: '+xhr.status);element.remove();}}};}
function randomInteger(min,max){var rand=min+Math.random()*(max+1-min);rand=Math.floor(rand);return rand;}
function show_random_baner(element){var indexes=localStorage.getItem('ms-learn-indexes2');if(!indexes||indexes==null){get_random_ad_baner(element,0);}else{for(var i=0;i<7;i++){if(indexes.indexOf(i)=='-1'){get_random_ad_baner(element,i);break;}}}}
function show_queue_baner(element){var indexes=localStorage.getItem('ms-learn-indexes2');var index=localStorage.getItem('ms-learn-queue-index');if(!indexes||indexes==null){if(!index||index==null){index=0;}
var ind=index;if(index>7)ind=0;get_random_ad_baner(element,ind);}else{if(!index||index==null){index=0;}
var ind=index;if(index>7)ind=0;if(indexes.indexOf(ind)=='-1'){get_random_ad_baner(element,ind);}else{for(var i=ind;i<7;i++){if(indexes.indexOf(i)=='-1'){get_random_ad_baner(element,i);break;}}}}}
function show_custom_baner(element){var xhr=new XMLHttpRequest();var baner_name='netology_ms1';if(!localStorage.getItem(baner_name)||localStorage.getItem(baner_name)==null||localStorage.getItem(baner_name)=='show'){xhr.open('GET',blu.ajaxurl+'?action=get_custom_a_block');xhr.send();xhr.onreadystatechange=function(){var DONE=4;var OK=200;if(xhr.readyState===DONE){if(xhr.status===OK){element.innerHTML=xhr.responseText;element.style.display='block';if(typeof ga!='undefined'&&ga)
ga('send','event','top-widget','show',baner_name);if(typeof EventTracking!='undefined'&&EventTracking)
EventTracking.show(7);localStorage.setItem(baner_name,'show');if(typeof dataLayer!='undefined'&&dataLayer){dataLayer.push({event:'optimize.activate'});(function(a,s,y,n,c,h,i,d,e){h.start=1*new Date();h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'');};(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null;},c);h.timeout=c;})(window,document.getElementById('custom_html-5'),'async-hide','dataLayer',4000,{'GTM-WW6L2L8':true});}
$('#mobile_baner_close_btn').on('click',function(){if(typeof ga!='undefined'&&ga)
ga('send','event','top-widget','closed',baner_name);if(typeof EventTracking!='undefined'&&EventTracking)
EventTracking.close(7);localStorage.setItem(baner_name,'closed');element.remove();});$('#mobile_baner_send_btn').on('click',function(){if(typeof ga!='undefined'&&ga)
ga('send','event','top-widget','click',baner_name);if(typeof EventTracking!='undefined'&&EventTracking)
EventTracking.click(7);localStorage.setItem(baner_name,'closed');element.remove();});if(xhr.responseText===0||xhr.responseText==='0'){element.remove();}}else{console.log('Error: '+xhr.status);element.remove();}}};}}
if(window.innerWidth<=979){if(typeof document.getElementById('mobile_baner_block_id')!='undefined'&&document.getElementById('mobile_baner_block_id')){var element=document.getElementById('mobile_baner_block_id');if(element!=undefined){show_custom_baner(element);}}}else{if(typeof document.getElementById('mobile_baner_block_widget_id')!='undefined'&&document.getElementById('mobile_baner_block_id')){var element=document.getElementById('mobile_baner_block_widget_id');if(element!=undefined){show_custom_baner(element);}}}
if(window.innerWidth>600){var top_baner_height=$('.tproger-top-baner').height();if(top_baner_height>0){var baner_key=$('#tproger-top-baner-key').val();if(baner_key!=''){if(!localStorage.getItem(baner_key)||localStorage.getItem(baner_key)==null){var top_menu_margin=top_baner_height;$('.top-baner-margin-menu').css('margin-top',top_menu_margin+20);$('.tproger-top-baner').slideToggle({duration:900});$('#top-baner-close-btn-id').click(function(){localStorage.setItem(baner_key,baner_key);$('.tproger-top-baner').slideToggle({duration:600});$('.top-baner-margin-menu').css('margin-top',0);});$('#top-baner-btn-url-id').click(function(){localStorage.setItem(baner_key,baner_key);$('.tproger-top-baner').slideToggle({duration:600});$('.top-baner-margin-menu').css('margin-top',0);});}else{}}}}});