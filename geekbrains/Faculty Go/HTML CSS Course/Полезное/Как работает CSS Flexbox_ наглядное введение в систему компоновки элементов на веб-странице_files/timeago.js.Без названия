var seconds=formatNum.bind(null,'секунду','%s секунду','%s секунды','%s секунд'),minutes=formatNum.bind(null,'минуту','%s минуту','%s минуты','%s минут'),hours=formatNum.bind(null,'час','%s час','%s часа','%s часов'),days=formatNum.bind(null,'день','%s день','%s дня','%s дней'),weeks=formatNum.bind(null,'неделю','%s неделю','%s недели','%s недель'),months=formatNum.bind(null,'месяц','%s месяц','%s месяца','%s месяцев'),years=formatNum.bind(null,'год','%s год','%s года','%s лет');var russianLocale=function(number,index){switch(index){case 0:return['только что','через несколько секунд'];case 1:return[seconds(number)+' назад','через '+seconds(number)];case 2:case 3:return[minutes(number)+' назад','через '+minutes(number)];case 4:case 5:return[hours(number)+' назад','через '+hours(number)];case 6:return['вчера','завтра'];case 7:return[days(number)+' назад','через '+days(number)];case 8:case 9:return[weeks(number)+' назад','через '+weeks(number)];case 10:case 11:return[months(number)+' назад','через '+months(number)];case 12:case 13:return[years(number)+' назад','через '+years(number)];default:return['','']}};function formatNum(f1,f,s,t,n){var n10=n%10,str=t;if(n===1){str=f1;}else if(n10===1&&n>20){str=f;}else if(n10>1&&n10<5&&(n>20||n<10)){str=s;}
return str;}
!function(root,factory){if(typeof module==='object'&&module.exports){module.exports=factory(root);module.exports['default']=module.exports;}
else
root.timeago=factory(root);}(typeof window!=='undefined'?window:this,function(){locales={},SEC_ARRAY=[60,60,24,7,365/7/12,12],SEC_ARRAY_LEN=6,ATTR_DATA_TID='data-tid',timers={};function toDate(input){if(input instanceof Date)return input;if(!isNaN(input))return new Date(toInt(input));if(/^\d+$/.test(input))return new Date(toInt(input));input=(input||'').trim().replace(/\.\d+/,'').replace(/-/,'/').replace(/-/,'/').replace(/(\d)T(\d)/,'$1 $2').replace(/Z/,' UTC').replace(/([\+\-]\d\d)\:?(\d\d)/,' $1$2');return new Date(input);}
function toInt(f){return parseInt(f);}
function formatDiff(diff,locale,defaultLocale){locale=locales[locale]?locale:(locales[defaultLocale]?defaultLocale:'en');var i=0,agoin=diff<0?1:0,total_sec=diff=Math.abs(diff);for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY_LEN;i++){diff/=SEC_ARRAY[i];}
diff=toInt(diff);i*=2;if(diff>(i===0?9:1))i+=1;return locales[locale](diff,i,total_sec)[agoin].replace('%s',diff);}
function diffSec(date,nowDate){nowDate=nowDate?toDate(nowDate):new Date();return(nowDate-toDate(date))/1000;}
function nextInterval(diff){var rst=1,i=0,d=Math.abs(diff);for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY_LEN;i++){diff/=SEC_ARRAY[i];rst*=SEC_ARRAY[i];}
d=d%rst;d=d?rst-d:rst;return Math.ceil(d);}
function Timeago(nowDate,defaultLocale){this.nowDate=nowDate;this.defaultLocale=defaultLocale||'en';}
Timeago.prototype.getLocalDate=function(date,timezone=null){const options={dateStyle:'long',year:'numeric',month:'long',day:'numeric'};if(timezone){options.timezone=timezone;}
return(new Date(date)).toLocaleDateString('ru-RU',options).replace((new Date()).getFullYear()+' г.','').replace(' г.','').trim();};Timeago.prototype.getLocalTime=function(date,timezone=null){const options={timeStyle:"short",hour:'numeric',minute:'numeric'};if(timezone){options.timezone=timezone;}
return(new Date(date)).toLocaleTimeString('ru-RU',options).trim();};Timeago.prototype.setTitleMSK=function(node,date){node.setAttribute('title',[this.getLocalDate(date,'Europe/Moscow'),this.getLocalTime(date,'Europe/Moscow')].join(' в ')+' МСК');};Timeago.prototype.doRender=function(node,date,locale){var diff=diffSec(date,this.nowDate),self=this,tid;this.setTitleMSK(node,date);node.innerHTML=formatDiff(diff,locale,this.defaultLocale).replace("вчера","вчера в "+this.getLocalTime(date)).replace("завтра","завтра в "+this.getLocalTime(date))
timers[tid=setTimeout(function(){self.doRender(node,date,locale);delete timers[tid];},Math.min(nextInterval(diff)*1000,0x7FFFFFFF))]=0;node.setAttribute(ATTR_DATA_TID,tid);};Timeago.prototype.format=function(date,locale){return formatDiff(diffSec(date,this.nowDate),locale,this.defaultLocale);};Timeago.prototype.render=function(nodes,locale){if(nodes.length===undefined)nodes=[nodes];for(var i=0,len=nodes.length;i<len;i++){this.doRender(nodes[i],nodes[i].getAttribute('datetime'),locale);}};Timeago.prototype.doLocalTime=function(node,date){this.setTitleMSK(node,date);node.innerText=[this.getLocalDate(date),this.getLocalTime(date)].join(' в ');};Timeago.prototype.localTime=function(nodes){if(nodes.length===undefined)nodes=[nodes];for(var i=0,len=nodes.length;i<len;i++){this.doLocalTime(nodes[i],nodes[i].getAttribute('datetime'));}};Timeago.prototype.setLocale=function(locale){this.defaultLocale=locale;};function timeagoFactory(nowDate,defaultLocale){return new Timeago(nowDate,defaultLocale);}
timeagoFactory.register=function(locale,localeFunc){locales[locale]=localeFunc;};timeagoFactory.cancel=function(node){var tid;if(node){tid=node.getAttribute(ATTR_DATA_TID);if(tid){clearTimeout(tid);delete timers[tid];}}else{for(tid in timers)clearTimeout(tid);timers={};}};return timeagoFactory;});timeago.register('ru-RU',russianLocale);var timeagoInstance=timeago();timeagoInstance.render(document.querySelectorAll('time.timeago'),'ru-RU');timeagoInstance.localTime(document.querySelectorAll('time.localtime'));